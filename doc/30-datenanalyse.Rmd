\cleardoublepage
# Datenanalyse
Dieses Kapitel liefert einen Überblick über die Methodik sowie die Ergebnisse der Datenanalyse.
Zunächst wird der verwendete Datensatz präsentiert und Kritik daran erörtert.
Weiterhin wird dargelegt, wie die betrachteten Topic-Modelle erzeugt werden und welche Methoden der sozialen Netzwerkanalyse Anwendung finden, sowie welche Software-Komponenten jeweils zum Einsatz kommen.
Im zweiten Teil des Kapitels werden dann die Ergebnisse vorgestellt, ohne dabei jedoch einer Interpretation zu weit vorzugreifen.

## Methodik

### Datensatz

Die Grundlage der Analyse bildet ein frei zugänglicher Datensatz mit Reddit-Kommentaren.
Jason Baumgartner, der unter dem Pseudonym *stuck_in_the_matrix*^[https://www.reddit.com/user/stuck_in_the_matrix] selbst auf Reddit aktiv ist, stellt monatliche Zusammenfassungen aller erstellten Kommentare zum Download bereit [@Baumgartner].
Diese reichen zum gegenwärtigen Zeitpunkt von Oktober 2018 zurück bis Dezember 2005.

#### Struktur
Die monatlichen Datensätze liegen in Form von Textdateien vor, in denen jede Zeile einen Kommentar sowie Metadaten enthält.
Das maschinenlesbare JSON-Format, in dem die Daten abgelegt sind, ermöglicht dabei eine effiziente computergestützte Auswertung.
Tabelle \@ref(tab:importantkeys) führt die für diese Arbeit relevanten Schlüssel-Wert-Paare des Datensatzes auf.
Der Schlüssel *parent_id* bezeichnet dabei das Element, auf welches sich der Kommentar bezieht.
Dies können Beiträge oberster Ordnung sein, sog. "Links", oder selbst Kommentare [@Reddit2018].
Zu beachten ist hier insbesondere, dass der eigentliche Textinhalt des Kommentars für diese Auswertung nicht genutzt wird.

```{r importantkeys}
knitr::kable(
  tribble(
    ~Schlüssel, ~Wert,
    "author", "Username des Kommentar-Erstellers",
    "id", "eindeutige ID des Kommentars",
    "parent_id", "eindeutige ID des Elements, auf das sich der Kommentar bezieht",
    "subreddit", "Name des Subreddits, in dem der Kommentar erstellt wurde"
  ),
  booktabs = TRUE,
  caption = "wichtige Schlüssel-Wert-Paare des Datensatzes"
)
```

#### Kohärenz des Datensatzes
Im März 2018 haben Gaffney und Matias eine Analyse des Baumgartner-Korpus vorgelegt [@Gaffney2018].
Der vollständige Korpus enthält neben Kommentaren auch Datensätze mit allen monatlich erstellten Beiträgen, im folgenden auch "Submissions" genannt.
Gaffney und Matias kommen zu dem Schluss, dass die Erfassung sowohl der Submissions als auch der Kommentare Lücken aufweist, also Elemente gänzlich nicht im Datensatz vorhanden sind.
Für den Gegenstand der vorliegenden Arbeit ist dieser Umstand insofern von Bedeutung, als dass fehlende Kommentare die Topic-Affinität von Nutzern verzerren können, etwa wenn ein Topic, in dem der Nutzer durchaus aktiv war, aufgrund fehlender Daten unterrepräsentiert ist.
Auch Gaffney und Matias stellen fest, dass Studien, welche auf die vollständige Historie von Nutzern zugreifen, dem höchsten Risiko ausgesetzt sind, lückenhafte Daten zu betrachten [@Gaffney2018].

Reddit weist jedem Kommentar eine eindeutige numerische ID zu^[Dies trifft nicht nur auf Kommentare zu; Reddit spricht in diesem Zusammenhang allgemeiner von *things* [@Reddit2018], wozu bspw. auch Submissions zählen.].
Das von Baumgartner eingesetzte System nimmt zusammenhängende Blöcke von jeweils 100 solcher IDs und versucht, die zugehörigen Kommentare über die Reddit-API^[https://api.reddit.com/] aufzulösen [@Baumgartner2018a]. 
Da Reddit auch Anfragen nach gelöschten Elementen sinnvoll beantwortet, also nicht etwa mit einer Fehlermeldung, sollte ein Bereich von 100 sequentiellen IDs auch vollständig im Datensatz abgebildet sein, inklusive als gelöscht markierter Elemente.
Gaffney und Matias stellen jedoch für den Zeitraum Dezember 2005 bis Februar 2016 fest, dass 943.755 Kommentar- und 1.539.583 Beitrags-IDs nicht in den Datensätzen enthalten sind.
(ref:gf4cap) Verschiedene Maße zur Bestimmung fehlender Kommentare [@Gaffney2018]
```{r gf4, out.width='80%', fig.cap='(ref:gf4cap)'}
knitr::include_graphics("./images/gaffneymatias_fig4.eps")
```
In Abbildung \@ref(fig:gf4) stellen die mittelblauen Punkte den Anteil fehlender Kommentare in Prozent dar.
Ab etwa April 2006 beginnt dieser Anteil zu sinken, fällt ab etwa August 2007 stark ab und stabilisiert sich ab etwa November 2007 im niedrigen einstelligen Bereich.
Um den Einfluss fehlender Kommentare so gering wie möglich zuhalten, wurden daher für die vorliegende Arbeit die Datensätze von November 2007 bis Februar 2018 ausgewertet.
Jason Baumgartner hat als Folge der Veröffentlichung von Gaffney und Matias angekündigt, fehlende Kommentare und Beiträge nachträglich zu erfassen [@Baumgartner2018].

### Topic-Modelle

### Ego-Netzwerke und soziale Netzwerkanalyse

## Ergebnisse

### Das Alter von Usern

In den vorangehenden Kapiteln wurde erläutert, welche Daten gesammelt wurden
und wie eine erste Vorauswahl getroffen wurde. Die detaillierte Analyse soll
Gegenstand dieses Kapitels sein.

#### Virtuelles Alter {#virtage}

Nach der Vorauswahl der Daten ergibt sich ein Analysezeitraum von 124 Monaten.
Da nicht alle Nutzer über diesen gesamten Zeitraum hinweg aktiv gewesen sein
werden, ist eine weitere Auswahl nöitg. Zudem ist es denkbar, dass ein Teil der
Nutzer nach nur wenigen Monaten die Plattform wieder verlassen hat.

Zur Bestimmung des virtuellen "Alters" der Nutzer, also wie lange
sie sich aktiv an Reddit-Communities beteiligen, wurde für jeden Monat erfasst,
in welchen Subreddits sie aktiv sind und wieviele Kommentare sie dort
verfassen. Diese monatlichen Daten wurden dann über den gesamten Zeitraum
aggregiert, sodass am Ende für jeden Nutzer ersichtlich war, in wie vielen
monatlichen Zusammenfassungen er auftaucht, sprich: wie viele Monate er sich
aktiv beteiligt hat.

**PLACEHOLDER USER AGES****PLACEHOLDER USER AGES**

Wie in Abbildung~\ref{fig:virt_alter} ersichtlich liegen 75\% der Daten
unterhalb des Mittelwerts, viele User sind also weniger als 6 Monate auf Reddit
aktiv. Um sinnvolle Aussagen über die zeitliche Entwicklung treffen zu können,
werden nur Nutzer betrachtet, die mindestens 6 Monate aktiv waren. Damit
verbleiben 7~047~535 Nutzer im Datensatz, was etwa 25\% der Gesamtzahl
entspricht. Abbildung~\ref{fig:virt_alter_geschnitten} zeigt die Verteilung für
diesen neuen Datensatz.


Für diese Nutzer werden die Subreddits erfasst, in denen sie aktiv sind. Über
die Reddit-API werden zu jedem dieser Subreddits 50 Beiträge aus der
\textit{Top}-Kategorie abgerufen, welche die höchstbewerteten Posts dieser
Community auflistet, unabhängig vom Erstellungsdatum des Beitrags. Diese
Top-Beiträge dienen im weiteren Verlauf dazu, ein Subreddit inhaltlich zu
charakterisieren; ihre Titel werden einer Topic-Analyse unterzogen.

**PLACEHOLDER USER AGES**

\begin{table}[h]
    \centering
    \begin{tabular}{lccccc}
        \toprule
        & N & Mittel & Median & Min & Max \\
        \midrule
        voller Datensatz & 28~029~500 & 6,665$\pm$12,407 & 2 & 1 & 124 \\
        mindestens 6 Monate aktiv & 7~047~535 & 21,593$\pm$17,634 & 15 & 6 & 124 \\
        \bottomrule
    \end{tabular}
    \caption{Altersverteilungen}%
    \label{tab:altersverteilungen}
\end{table}
Beim Abrufen der insgesamt 419~616 Subreddits antwortete die Reddit-API in XY
Fällen mit \glqq{}404 Not Found\grqq{}, und in XY Fällen mit \glqq{}403
Forbidden\grqq{}. Die genaue Ursache dieser Fehler kann nicht bestimmt werden,
aber 404 lässt vermuten, dass das Subreddit gelöscht wurde, und 403 deutet auf
eine zugangsbeschränkte Community hin, die nicht frei einsehbar ist.


Wegen eines Programmierfehlers wurden zu 499 Usern nicht die Subreddits
abgerufen, in die sie gepostet hatten. Eine nachträgliche Analyse ergab, dass
diese Nutzer im Mittel einen Monat aktiv waren und 1,17 Kommentare verfassten.
Aufgrund dieser geringen Aktivität wurde keine Nacherfassung der Subreddits
durchgeführt.
<!-- select avg(months_active), avg(total_count) from posts where username in (select username from tmp_missing); -->


### Verteilung von Topics

### Fallstudie